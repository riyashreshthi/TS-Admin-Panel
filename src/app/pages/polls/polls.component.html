
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<div class="main-content">
    <div class="container-fluid">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header card-header-icon card-header-info">
                            <div class="card-icon">
                                <i class="material-icons">assignment</i>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <h4 class="card-title"> <b>Polls List</b></h4>
                                </div>
                            <div class="col-md-4"></div>
                                <div class="col-md-2">
                                    <button mat-raised-button (click) = "addPollPage()" type="button"
                                                            matTooltip="Add Poll" [matTooltipPosition]="'above'"
                                                            class="btn btn-info">Add Poll</button>
                              </div>
                            </div>
                        </div>  
                        <div class="card-body" style="height: 470px; padding-top:0px;overflow-y:auto">
                                <div class="row">
                                    <div class="col-md-12" *ngFor="let poll of pollsData;let index = index;first as isFirst ">
                                        <div *ngIf="isFirst" style="padding-left: 55px;padding-bottom: 15px;">
                                            <div class="row">
                                                <div class="col-md-1"></div>

                                                <div class="col-md-3">
                                                    <h4 class="card-title"> <b>PRESENT POLLS</b></h4>
                                                </div>
                                                <div class="col-md-5"></div>
                                                <div class="col-md-3">
                                                    <span style="color: red;margin-top: -10px;"> <b>EXPIRY</b></span>
                                                </div>
                                                </div>
                                        </div>  
                                      <mat-accordion multi>
                                              <mat-expansion-panel  >
                                                <mat-expansion-panel-header>
                                                  <mat-panel-title>
                                                      <div class="container">
                                                          <div class="row" style="padding:20px">
                                                              <div class="col-md-1">
                                                                  <h3 class="text-info">Q{{index+1}})</h3>
                                                              </div>
                                                              <div class="col-md-9" style="padding-right:0px">
                                                                <span style="margin-right:20px">{{poll.question}}</span>
                                                              </div>
                                                                <div class="col-md-2" style="margin-left:0px; padding-right:0px; color:red">

                                                                <span  *ngIf="poll.expiry==null"><small>(No Expiry)</small></span> 

                                                                <span  *ngIf="poll.expiry!=null"><small>{{ poll.expiry |  date:short :'EEEE, MMMM d'}},{{getTime(poll.expiry)}}</small>
                                                                    </span> 
                                                                </div>

                                                             
                                                          </div>
                                    
                                                      </div>
                                                  </mat-panel-title>
                                                
                                                </mat-expansion-panel-header>
                                                <div class="container" style="margin-left:10px">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="table-responsive"style="overflow-x: hidden !important">
                                                                <table class="table table-hover">
                                                                    <thead class="text-info">
                                                                        <th>Sr no.</th>
                                                                        <th>Options</th>
                                                                        <th>Votes</th>
                                                                    </thead>
                                                                    <tbody *ngFor ="let pollOption of poll.options; let i = index">
                                                                     <td>{{i+1}}</td>
                                                                      <td>{{pollOption.option}}</td>
                                                                      <td>{{pollOption.votes}}</td>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                              </mat-expansion-panel>
                                            
                                            </mat-accordion>
                                        </div>
                                </div>
                                <hr>
                                <div class="row">      
                                    <div class="col-md-12"  *ngFor="let poll of pastPollsData;let index = index;first as isFirst ">
                                     
                                        <div *ngIf="isFirst" style="padding-left: 55px;padding-bottom: 15px;">
                                            <div class="row">
                                                <div class="col-md-1"></div>
                                                <div class="col-md-2">
                                                    <h4 class="card-title"> <b>PAST POLLS</b></h4>
                                                </div>
                                                <div class="col-md-6"></div>
                                                <div class="col-md-3">
                                                    <h4 style="color: red;"> <b>EXPIRED</b></h4>
                                                </div>
                                                </div>
                                        </div>  
                                        <mat-accordion multi>
                                                <mat-expansion-panel >
                                                  <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        <div class="container">
                                                            <div class="row" style="padding:20px">
                                                                <div class="col-md-1">
                                                                    <h3 class="text-info">Q{{index+1}})</h3>
                                                                </div>
                                                                <div class="col-md-11">
                                                                  <span style="margin-right:25px">{{poll.question}}</span>
                                                                 </div>
                                                             </div>
                                                        </div>
                                                    </mat-panel-title>
                                                  
                                                  </mat-expansion-panel-header>
                                                  <div class="container" style="margin-left:10px">
                                                      <div class="row">
                                                          <div class="col-md-12">
                                                              <div class="table-responsive"style="overflow-x: hidden !important">
                                                                  <table class="table table-hover">
                                                                      <thead class="text-info">
                                                                          <th>Sr no.</th>
                                                                          <th>Options</th>
                                                                          <th>Votes</th>
                                                                      </thead>
                                                                      <tbody *ngFor ="let pollOption of poll.options; let i = index">
                                                                       <td>{{i+1}}</td>
                                                                        <td>{{pollOption.option}}</td>
                                                                        <td>{{pollOption.votes}}</td>
                                                                      </tbody>
                                                                  </table>
                                                              </div>
                                                          </div>
                                                      </div>
                                                  </div>
                                                </mat-expansion-panel>
                                              
                                              </mat-accordion>
                                          </div>
                                </div>
                            </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>